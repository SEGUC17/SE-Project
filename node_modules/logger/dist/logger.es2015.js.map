{"version":3,"file":"logger.es2015.js","sources":["../lib/on_off.js","../lib/context.js","../lib/index.js"],"sourcesContent":["// Logger can be used and required from many places.\n// This is global on / off switch for it, which all\n// created logger contexts respect.\n\nexport default {\n  init() {\n    window.filestackInternals.logger.working = false;\n  },\n  isWorking() {\n    return window.filestackInternals.logger.working;\n  },\n  on() {\n    window.filestackInternals.logger.working = true;\n  },\n  off() {\n    window.filestackInternals.logger.working = false;\n  },\n};\n","/* eslint no-console:0 */\n\nconst context = (contextName, onOff) => {\n  const api = function log(...stuff) {\n    const convertedToStrings = [...stuff].map((thing) => {\n      if (typeof thing === 'object') {\n        return JSON.stringify(thing, (key, value) => {\n          if (typeof value === 'function') {\n            // If any function named json is found then call that function to get the json object.\n            if (key === 'json') {\n              try {\n                return value();\n              } catch (err) {\n                // Throws? No worries. Just go on and return string.\n              }\n            }\n            return '[Function]';\n          }\n          if (value instanceof File) {\n            return `[File name: ${value.name}, mimetype: ${value.type}, size: ${value.size}]`;\n          }\n          return value;\n        }, 2);\n      }\n      return thing;\n    });\n    if (onOff.isWorking()) {\n      console.log(`[${contextName}]`, ...convertedToStrings);\n    }\n  };\n\n  api.context = (subContextName) => {\n    return context(`${contextName}][${subContextName}`, onOff);\n  };\n\n  api.on = onOff.on;\n  api.off = onOff.off;\n\n  return api;\n};\n\nexport default context;\n","import onOff from './on_off';\nimport context from './context';\n\nconst logger = context('filestack', onOff);\n\nconst initializeGlobalNamespace = () => {\n  let namespace;\n  if (typeof window === 'object') {\n    namespace = window.filestackInternals;\n    if (!namespace) {\n      namespace = {};\n      window.filestackInternals = namespace;\n    }\n    if (!namespace.logger) {\n      namespace.logger = logger;\n      onOff.init();\n    }\n  }\n  return namespace;\n};\n\ninitializeGlobalNamespace();\n\nexport default logger;\n"],"names":[],"mappings":"AAAA;;;;AAIA,YAAe;EACb,IAAI,GAAG;IACL,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;GAClD;EACD,SAAS,GAAG;IACV,OAAO,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC;GACjD;EACD,EAAE,GAAG;IACH,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;GACjD;EACD,GAAG,GAAG;IACJ,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;GAClD;CACF,CAAC;;ACjBF;;AAEA,MAAM,OAAO,GAAG,CAAC,WAAW,EAAE,KAAK,KAAK;EACtC,MAAM,GAAG,GAAG,SAAS,GAAG,CAAC,GAAG,KAAK,EAAE;IACjC,MAAM,kBAAkB,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;MACnD,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;QAC7B,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,KAAK,KAAK;UAC3C,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;;YAE/B,IAAI,GAAG,KAAK,MAAM,EAAE;cAClB,IAAI;gBACF,OAAO,KAAK,EAAE,CAAC;eAChB,CAAC,OAAO,GAAG,EAAE;;eAEb;aACF;YACD,OAAO,YAAY,CAAC;WACrB;UACD,IAAI,KAAK,YAAY,IAAI,EAAE;YACzB,OAAO,CAAC,YAAY,EAAE,KAAK,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;WACnF;UACD,OAAO,KAAK,CAAC;SACd,EAAE,CAAC,CAAC,CAAC;OACP;MACD,OAAO,KAAK,CAAC;KACd,CAAC,CAAC;IACH,IAAI,KAAK,CAAC,SAAS,EAAE,EAAE;MACrB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,GAAG,kBAAkB,CAAC,CAAC;KACxD;GACF,CAAC;;EAEF,GAAG,CAAC,OAAO,GAAG,CAAC,cAAc,KAAK;IAChC,OAAO,OAAO,CAAC,CAAC,EAAE,WAAW,CAAC,EAAE,EAAE,cAAc,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;GAC5D,CAAC;;EAEF,GAAG,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;EAClB,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;;EAEpB,OAAO,GAAG,CAAC;CACZ,CAAC,AAEF;;ACtCA,MAAM,MAAM,GAAG,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;;AAE3C,MAAM,yBAAyB,GAAG,MAAM;EACtC,IAAI,SAAS,CAAC;EACd,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;IAC9B,SAAS,GAAG,MAAM,CAAC,kBAAkB,CAAC;IACtC,IAAI,CAAC,SAAS,EAAE;MACd,SAAS,GAAG,EAAE,CAAC;MACf,MAAM,CAAC,kBAAkB,GAAG,SAAS,CAAC;KACvC;IACD,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;MACrB,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC;MAC1B,KAAK,CAAC,IAAI,EAAE,CAAC;KACd;GACF;EACD,OAAO,SAAS,CAAC;CAClB,CAAC;;AAEF,yBAAyB,EAAE,CAAC,AAE5B,;;"}